function stringify(p) {
    return JSON.stringify(p, 0, 2).replace(/\n/g, '<br>').replace(/ /g, '&nbsp;');
    // let s;
    // for (let p in obj) {
    //
    // }
}

module.exports = function (obj, log) {

    function visitDict(dict) {
        log('<ul>')
        for (let p in dict) {
            log('<li>')
            visit(dict[p], p)
            log('</li>')
            //log(stringify(dict[p],0,4))
        }
        log('</ul>')

    }
    log('<br><hr><br>');
    function visit(obj, name) {
        if (!obj) return '';
        name = name || obj.name || '';
        let value = obj.charAt || obj.toFixed? obj : obj.value;


        log('<h3>');
        if (obj.type){
            log(`(${obj.type})`);
        }
        if (name){
            log(name);
        }
        if (obj.loc){
            log('<small style="font-style: italic;opacity:0.6">line: ', obj.loc.start.line, '</small>');
        }

        if (typeof value !== 'undefined') log(` = ${value}`)
        log('</h3>');



        if (obj.props) {
            log('<div style="color:orange">')
            visitDict(obj.props);
            log('</div>');
        }
        if (obj.vars) {
            log('<div style="color:blue">')
            visitDict(obj.vars)
            log('</div>')
        }

    }
    visit(obj);
    log('<br><hr><br>');
    // log(
    //     JSON.stringify(obj,0,4)
    // )
};
