var test = require('tape');

var toAst = require('../')();
var map = require('map-stream');
var vfs = require('vinyl-fs');

test('parsing', function (t) {
    vfs.src(['mocks/*.js'])
        .pipe(toAst)
        .pipe(map(function (file) {
            var ast = file.ast;
            var body = ast.program.body;
            t.equal(body.length, 4); 
            t.equal(body[0].type, 'ImportDeclaration');
            t.equal(body[1].type, 'FunctionDeclaration'); 
            t.equal(body[2].type, 'FunctionDeclaration'); 
            t.equal(body[3].type, 'FunctionDeclaration'); 
            t.end();
        }));
});
